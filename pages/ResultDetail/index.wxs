var fmtDate = function (obj) {
  if (!obj) return ''
  return obj.split('T')[0]
}
var weekday = function (obj) {
  if (!obj) return ''
  obj = obj.split('T')[0].split('-').join('/')
  var date = getDate(obj).getDay();
  var week = '';
  switch (date) {
    case 0:
      week = "星期日";
      break;
    case 1:
      week = "星期一";
      break;
    case 2:
      week = "星期二";
      break;
    case 3:
      week = "星期三";
      break;
    case 4:
      week = "星期四";
      break;
    case 5:
      week = "星期五";
      break;
    case 6:
      week = "星期六";
      break;
  }
  return week;
}
var str = function (obj) {
  if (!obj) return ''
  return obj.substring(0, 2)
}

var checkIsVessel = function (type) {
  if (!type) return true
  var array = ['truck', 'road', 'mixed', 'rail', 'barge', 'feeder', 'third party feeder', 'intermodal', 'unknown']
  for (var i = 0; i < array.length; i++) {
    var element = array[i];
    if (type.toLocaleLowerCase().indexOf(element) > -1) {
      return false
    }
  }
  return true
}

var checkQiYunGangKou = function (index, list) {
  var newList = list.slice(0, index)
  var res = true
  for (var i = 0; i < newList.length; i++) {
    var element = newList[i];
    if (checkIsVessel(element.transportation.vehicle.vehicleName)) {
      res = false
      break
    }
  }
  return res
}

var checkXieHuoGangKou = function (index, list) {
  var res = false
  var element = list[index];
  var element2 = list[index - 1];
  if (!checkIsVessel(element.transportation.vehicle.vehicleName) && checkIsVessel(element2.transportation.vehicle.vehicleName)) {
    res = true
  }
  return res
}

module.exports = {
  fmtDate: fmtDate,
  weekday: weekday,
  str: str,
  checkQiYunGangKou: checkQiYunGangKou,
  checkXieHuoGangKou: checkXieHuoGangKou,
  checkIsVessel: checkIsVessel
}