<!--页面常用方法编写-Jason-2022-03-22 13:52-->
<wxs module="filters" src="./index.wxs"></wxs>
<!--pages/ResultDetail/index.wxml-->
<view class="resultContainers">
  <view class="resultCardContainers">
    <view class="resultCardContainer">
      <view class="cardContainer">
        <view>{{detail.pointfrom}} - </view>
        <view>{{detail.pointto}}</view>
      </view>
      <view class="carddate">
        <image src="../../assets/img/result/calendar@2x.png" mode="aspectFit"></image><text>{{detail.transitTime}} 天</text>
      </view>
      <view class="cardtranshipment">
        <image src="../../assets/img/result/zhuanyun@2x.png" mode="aspectFit"></image><text>{{detail.transhipment}} 转运</text>
      </view>
    </view>
  </view>
  <view class="resultDetailContainer">
    <view style="padding-top: 20rpx;" wx:for="{{routingDetails}}" wx:key="index">
      <!-- 海运 -->
      <view class="yunshuContainers" wx:if="{{item.transportation.meanOfTransport === 'Vessel'}}">
        <view class="contents">
          <view class="leftIcons {{index === routingDetails.length - 1 ? 'last' : ''}}">
            <view class="leftLine"></view>
            <view class="lineDto" wx:if="{{!index || routingDetails[index - 1].transportation.meanOfTransport !== 'Vessel'}}"></view>
            <image src="../../assets/img/result/zhuanyun@2x.png" mode="aspectFit" wx:else class="zhuanyun"></image>
            <image wx:if="{{index === routingDetails.length - 1}}" class="location" src="../../assets/img/seniorsearch/location_white.png" mode="aspectFit"></image>
            <image src="../../assets/img/seniorsearch/ship.png" class="shipIcon"></image>
          </view>
          <view wx:if="{{index}}">
            <view class="diquContainer">
              <view class="names">{{item.pointFrom.location.name}}，</view>
              <view class="code">{{filters.str(item.pointFrom.location.internalCode)}}</view>
              <view class="tags tags2" wx:if="{{filters.checkQiYunGangKou(index, routingDetails)}}">起运港</view>
            </view>
            <view class="gangKouNames">{{item.pointFrom.location.facility.name}}</view>
          </view>
          <view class="yunshuContainer">
            <view class="timeContainer">{{filters.fmtDate(item.pointFrom.departureDateLocal)}} {{filters.weekday(item.pointFrom.departureDateLocal)}}</view>
            <block wx:if="{{!index}}">
              <view class="nameContainer">
                <view class="names">{{item.pointFrom.location.name}}，</view>
                <view class="code">{{filters.str(item.pointFrom.location.internalCode)}}</view>
                <view class="tags tags2">起运港</view>
              </view>
              <view class="gangKouName">{{item.pointFrom.location.facility.name}}</view>
            </block>
            <view class="gangKouTime">
              <text>验证集装箱总重量(VGM)截止时间：</text>
              <text class="time">{{filters.fmtDate(item.pointFrom.vgmCutoffDate)}} {{filters.weekday(item.pointFrom.vgmCutoffDate)}}</text>
            </view>
            <view class="gangKouTime">
              <text>港口截关时间：</text>
              <text class="time">{{filters.fmtDate(item.pointFrom.portCutoffDate)}} {{filters.weekday(item.pointFrom.portCutoffDate)}}</text>
            </view>
            <view class="shipName" style="margin-top: 30rpx;">
              <text>Vessel</text>
              <text>{{item.transportation.vehicule.vehiculeName}}</text>
            </view>
            <view class="shipName other">
              <text>Service</text>
              <text>{{item.transportation.voyage.service.code}}</text>
            </view>
            <view class="shipName other" style="margin-top: 30rpx;">
              <text>本地航次： </text>
              <text>-</text>
            </view>
            <view class="shipName other">
              <text>航次：</text>
              <text>{{item.transportation.voyage.voyageReference}}</text>
            </view>
            <view class="timeContainer" style="margin-top: 30rpx;">{{filters.fmtDate(item.pointTo.arrivalDateLocal)}} {{filters.weekday(item.pointTo.arrivalDateLocal)}}</view>
          </view>
        </view>
        <view class="zuihouContainer" wx:if="{{index === routingDetails.length - 1}}">
          <view class="diquContainer" style="margin-bottom: 12rpx;">
            <view class="names">{{item.pointTo.location.name}}，</view>
            <view class="code">{{filters.str(item.pointTo.location.internalCode)}}</view>
            <view class="tags tags2">卸货港</view>
          </view>
          <view class="gangKouNames">{{item.pointTo.location.facility.name}}</view>
        </view>
      </view>
      <!-- 其他运输 -->
      <view class="yunshuContainers" wx:else>
        <view class="contents">
          <view class="leftIcons {{index === routingDetails.length - 1 ? 'last' : ''}}">
            <view class="leftLine"></view>
            <view class="lineDto" wx:if="{{!index || item.transportation.meanOfTransport !== 'Vessel'}}"></view>
            <image wx:if="{{index === routingDetails.length - 1}}" class="location" src="../../assets/img/seniorsearch/location_white.png" mode="aspectFit"></image>
            <image src="../../assets/img/result/freight@2x.png" class="freight"></image>
          </view>
          <view wx:if="{{index}}">
            <view class="diquContainer">
              <view class="names">{{item.pointFrom.location.name}}，</view>
              <view class="code">{{filters.str(item.pointFrom.location.internalCode)}}</view>
              <view class="tags tags2" wx:if="{{filters.checkXieHuoGangKou(index, routingDetails)}}">卸货港</view>
            </view>
          </view>
          <view class="yunshuContainer">
            <view class="timeContainer">{{filters.fmtDate(item.pointFrom.departureDateLocal)}} {{filters.weekday(item.pointFrom.departureDateLocal)}}</view>
            <block wx:if="{{!index}}">
              <view class="nameContainer">
                <view class="names">{{item.pointFrom.location.name}}，</view>
                <view class="code">{{filters.str(item.pointFrom.location.internalCode)}}</view>
                <view class="tags tags2">始发地</view>
              </view>
            </block>
            <view class="rails">{{item.transportation.meanOfTransport}}</view>
            <view class="timeContainer" style="margin-top: 10rpx;">{{filters.fmtDate(item.pointTo.arrivalDateLocal)}} {{filters.weekday(item.pointTo.arrivalDateLocal)}}</view>
          </view>
        </view>
        <view class="zuihouContainer" wx:if="{{index === routingDetails.length - 1}}">
          <view class="diquContainer">
            <view class="names">{{item.pointTo.location.name}}，</view>
            <view class="code">{{filters.str(item.pointTo.location.internalCode)}}</view>
            <view class="tags tags2">最终目的地</view>
          </view>
          <!-- <view class="gangKouNames">{{item.pointTo.location.facility.name}}</view> -->
        </view>
      </view>
    </view>
  </view>
</view>