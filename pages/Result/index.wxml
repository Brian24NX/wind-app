<!--页面常用方法编写-Jason-2022-03-22 13:52-->
<wxs module="filters">
  var fmtDate = function (obj) {
    var time = getDate(obj);
    var year = time.getFullYear();
    var month = time.getMonth() + 1;
    var date = time.getDate();

    month = month < 10 ? "0" + month : month;
    date = date < 10 ? "0" + date : date;
    return year + "-" + month + "-" + date;
  }
  var weekDay = function (obj) {
    var date = getDate(obj).getDay();
    console.log(date);
    switch (date) {
      case 0:
        week = "星期日";
        break;
      case 1:
        week = "星期一";
        break;
      case 2:
        week = "星期二";
        break;
      case 3:
        week = "星期三";
        break;
      case 4:
        week = "星期四";
        break;
      case 5:
        week = "星期五";
        break;
      case 6:
        week = "星期六";
        break;
    }
    return week;
  }
  module.exports = {
    fmtDate: fmtDate,
    weekDay: weekDay
  }
</wxs>
<!--pages/Result/index.wxml-->
<view class="searchResultTopContainer">
  <view class="searchTop">
    <view class="serchLeft">SHANGHAI - TOKYO</view>
    <view class="searchLine"></view>
    <view class="searchTime">未来三星期</view>
  </view>
  <view class="calendarContainer">
    <view class="calendarLeft">
      <view class="oneDay {{index === 2 ? 'current' : ''}}" wx:for="{{5}}">
        <view class="dayValue">03.07</view>
        <view>周一</view>
      </view>
    </view>
    <image class="calendarCenter" src="/assets/img/result/shadow@2x.png"></image>
    <view class="calendarRight">
      <image src="/assets/img/result/calendar@2x.png"></image>
      <view>日历</view>
    </view>
  </view>
  <view wx:if="{{viewactived}}" class="tabContainers">
    <view class="oneTab {{index === 0 ? 'tabActived' : ''}}" wx:for="{{3}}">
      <view class="tabName">CNC</view>
      <view>4 路线方案</view>
      <view class="activedLine"></view>
    </view>
  </view>
</view>
<view class="resultContainers">
  <view wx:if="{{routinglist!=null}}">
    <view class="oneResult" wx:for="{{routinglist}}" wx:key="index" bindtap="toDetail" data-id="{{index}}">
      <view class="tips">
        <view class="oneTip" wx:if="{{item.departureDateFlag}}">最快离港</view>
        <view class="oneTip" wx:if="{{item.arrivalDateFlag}}">最快到港</view>
      </view>
      <view class="resContents">
        <view class="leftStep">
          <view class="leftStepDto"></view>
          <view class="leftStepLine"></view>
          <image class="leftStepLoaction" src="/assets/img/result/location@2x.png"></image>
        </view>
        <view class="rightContainer">
          <view class="leftContent">
            <view class="time">{{filters.fmtDate(item.departuredate)}} {{filters.weekDay(item.departuredate)}} {{item.pointfrom}}</view>
            <view class="ship">
              <image src="/assets/img/result/huolunhao@2x.png" mode="aspectFit" class="shipIcon"></image>
              <view>{{item.shipname}}</view>
            </view>
            <view class="ship">
              <image src="/assets/img/result/hangxian@2x.png" mode="aspectFit" class="shipIcon"></image>
              <view>{{item.service}}</view>
            </view>
            <view class="time end">{{filters.fmtDate(item.arrivaldate)}} {{filters.weekDay(item.arrivaldate)}} {{item.pointto}}</view>
          </view>
          <view class="rightContent">
            <view class="timeDay">{{item.transitTime}} 天</view>
            <view class="zhuanrun" wx:if="{{item.transhipment}}">
              <image src="/assets/img/result/zhuanyun@2x.png"></image>
              <view>{{item.transhipment}} 转运</view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
  <!--无结果-->
  <view wx:if="{{routinglist==null}}">
    <noresult></noresult>
  </view>
  <view>
    <foot-tab-bar />
  </view>
</view>