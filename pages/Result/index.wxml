<!--页面常用方法编写-Jason-2022-03-22 13:52-->
<wxs module="filters" src="./index.wxs"></wxs>
<!--pages/Result/index.wxml-->
<view class="searchResultTopContainer">
  <view class="searchTop">
    <view class="serchLeft">{{placeOfLoading}} - {{placeOfDischarge}}</view>
    <view class="searchLine"></view>
    <view class="searchTime">未来{{weekNum}}星期</view>
  </view>
  <view class="calendarContainer">
    <scroll-view scroll-x class="calendarLeft" scroll-left="{{scrollLeft}}" scroll-with-animation>
      <view class="oneDay {{item === searchDate ? 'current' : ''}}" wx:for="{{dateList}}" wx:key="index" catchtap="changeDay" data-item="{{item}}">
        <view class="dayValue">{{filters.fmtDate2(item)}}</view>
        <view>周{{filters.weekDay(item)}}</view>
      </view>
    </scroll-view>
    <image class="calendarCenter" src="/assets/img/result/shadow@2x.png"></image>
    <picker mode="date" value="{{searchDate}}" start="1970-09-01" end="2079-09-01" bindchange="bindTimeChange">
      <view class="calendarRight">
        <image src="/assets/img/result/calendar@2x.png"></image>
        <view>日历</view>
      </view>
    </picker>
  </view>
  <view wx:if="{{viewactived}}" class="tabContainers">
    <view class="oneTab {{item.title === currentPlan ? 'tabActived' : ''}}" wx:for="{{planList}}" wx:key="index" catchtap="changePlan" data-title="{{item.title}}">
      <view class="tabName">{{item.title}}</view>
      <view>{{item.value}} 路线方案</view>
      <view class="activedLine"></view>
    </view>
  </view>
</view>
<view class="resultContainers" style="padding-top: {{viewactived ? '390rpx' : '290rpx'}};padding-bottom: {{isPhoneX ? '210rpx' : '170rpx'}};">
  <view wx:if="{{routinglist.length}}">
    <view class="oneResult" wx:for="{{routinglist}}" wx:key="index" bindtap="toDetail" data-id="{{index}}">
      <view class="tips">
        <view class="oneTip" wx:if="{{item.departureDateFlag}}">最快离港</view>
        <view class="oneTip" wx:if="{{item.arrivalDateFlag}}">最快到港</view>
      </view>
      <view class="resContents">
        <view class="leftStep">
          <view class="leftStepDto"></view>
          <view class="leftStepLine"></view>
          <image class="leftStepLoaction" src="/assets/img/result/location@2x.png"></image>
        </view>
        <view class="rightContainer">
          <view class="leftContent">
            <view class="time">{{filters.fmtDate(item.departuredate)}} 星期{{filters.weekDay(item.departuredate)}} {{item.pointfrom}}, {{polCode}}</view>
            <view class="ship" wx:if="{{item.startMeanOfTransport === 'Vessel' || item.endMeanOfTransport === 'Vessel'}}">
              <image src="/assets/img/result/huolunhao@2x.png" mode="aspectFit" class="shipIcon"></image>
              <view>{{filters.getShopName(item.routingDetails)}}</view>
            </view>
            <view class="ship" wx:if="{{item.startMeanOfTransport === 'Vessel' || item.endMeanOfTransport === 'Vessel'}}">
              <image src="/assets/img/result/hangxian@2x.png" mode="aspectFit" class="shipIcon"></image>
              <view>{{item.service}}</view>
            </view>
            <view class="time end">{{filters.fmtDate(item.arrivaldate)}} 星期{{filters.weekDay(item.arrivaldate)}} {{item.pointto}}, {{podCode}}</view>
          </view>
          <view class="rightContent">
            <view class="timeDay">{{item.transitTime}} 天</view>
            <view class="zhuanrun" wx:if="{{item.transhipment}}">
              <image src="/assets/img/result/zhuanyun@2x.png"></image>
              <view>{{item.transhipment}} 转运</view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
  <!--无结果-->
  <view wx:if="{{!routinglist.length && !isLoading}}">
    <noresult></noresult>
  </view>
</view>
<!-- 底部筛选条件 tabbar -->
<foot-tab-bar radio="{{sort}}" plans="{{plans}}" routesPlanList="{{routesPlanList}}" bind:tabbarchange="onTabbarChange" />